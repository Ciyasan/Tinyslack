{"ast":null,"code":"var _class;\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/Service/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Email est requis.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Email invalide.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Mot de passe est requis.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class LoginComponent {\n  constructor(fb, userService, route) {\n    this.fb = fb;\n    this.userService = userService;\n    this.route = route;\n    this.loginForm = this.fb.group({\n      userMail: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n  }\n  onSubmit(event) {\n    if (this.loginForm.valid) {\n      const formValue = this.loginForm.value;\n      this.userSubscription = this.userService.getUsers().subscribe(users => {\n        const user = users.find(user => user.userMail === formValue.userMail && user.password === formValue.password);\n        if (user) {\n          this.userService.login();\n          this.userService.setCurrentUser(user);\n          this.route.navigate(['/profile']);\n          console.log('Utilisateur connecté :', user);\n        } else {\n          console.log('Identifiants incorrects');\n        }\n      });\n    } else {\n      console.log('Le formulaire de connexion est invalide');\n    }\n  }\n  logout() {\n    this.userService.logout(); // Appel à la méthode de déconnexion\n    console.log('Utilisateur déconnecté');\n  }\n}\n_class = LoginComponent;\n_class.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-login\"]],\n  decls: 21,\n  vars: 5,\n  consts: [[3, \"formGroup\", \"submit\"], [\"for\", \"userMail\"], [\"type\", \"email\", \"id\", \"userMail\", \"formControlName\", \"userMail\"], [4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"formControlName\", \"password\"], [\"type\", \"submit\", 1, \"form-button\", 3, \"disabled\"], [\"routerLink\", \"/signup\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Connexion\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function LoginComponent_Template_form_submit_2_listener($event) {\n        return ctx.onSubmit($event);\n      });\n      i0.ɵɵelementStart(3, \"div\")(4, \"label\", 1);\n      i0.ɵɵtext(5, \"Email:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"input\", 2);\n      i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 3, 0, \"div\", 3);\n      i0.ɵɵtemplate(8, LoginComponent_div_8_Template, 3, 0, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"br\");\n      i0.ɵɵelementStart(10, \"div\")(11, \"label\", 4);\n      i0.ɵɵtext(12, \"Mot de passe:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 5);\n      i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 3, 0, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"br\");\n      i0.ɵɵelementStart(16, \"button\", 6);\n      i0.ɵɵtext(17, \" Connexion \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementStart(19, \"a\", 7);\n      i0.ɵɵtext(20, \"Nouveau membre? Vous inscrire!\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx.loginForm.get(\"userMail\")) == null ? null : tmp_1_0.hasError(\"required\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.loginForm.get(\"userMail\")) == null ? null : tmp_2_0.hasError(\"userMail\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx.loginForm.get(\"password\")) == null ? null : tmp_3_0.hasError(\"required\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n    }\n  },\n  dependencies: [i4.NgIf, i3.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"h2[_ngcontent-%COMP%] {\\n  margin-bottom: 3%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50L2xvZ2luL2xvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJoMiB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMyU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent","constructor","fb","userService","route","loginForm","group","userMail","required","password","onSubmit","event","valid","formValue","value","userSubscription","getUsers","subscribe","users","user","find","login","setCurrentUser","navigate","console","log","logout","ɵɵdirectiveInject","i1","FormBuilder","i2","UserService","i3","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_submit_2_listener","$event","ɵɵelement","ɵɵtemplate","LoginComponent_div_7_Template","LoginComponent_div_8_Template","LoginComponent_div_14_Template","ɵɵadvance","ɵɵproperty","tmp_1_0","get","hasError","tmp_2_0","tmp_3_0","invalid"],"sources":["C:\\Users\\ciyas\\Desktop\\formation_java\\ProjetJury\\FrontEndCertif\\src\\app\\component\\login\\login.component.ts","C:\\Users\\ciyas\\Desktop\\formation_java\\ProjetJury\\FrontEndCertif\\src\\app\\component\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { User } from 'src/app/Model/user';\r\nimport { UserService } from 'src/app/Service/user.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css'],\r\n})\r\nexport class LoginComponent {\r\n  loginForm: FormGroup;\r\n  private userSubscription: Subscription | undefined;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private userService: UserService,\r\n    private route: Router,\r\n  ) {\r\n    this.loginForm = this.fb.group({\r\n      userMail: ['', Validators.required],\r\n      password: ['', Validators.required],\r\n    });\r\n  }\r\n\r\n  onSubmit(event: Event) {\r\n    if (this.loginForm.valid) {\r\n      const formValue: User = this.loginForm.value;\r\n\r\n      this.userSubscription = this.userService.getUsers().subscribe((users) => {\r\n        const user = users.find(\r\n          (user) =>\r\n            user.userMail === formValue.userMail &&\r\n            user.password === formValue.password,\r\n        );\r\n\r\n        if (user) {\r\n          this.userService.login();\r\n          this.userService.setCurrentUser(user);\r\n          this.route.navigate(['/profile']);\r\n          console.log('Utilisateur connecté :', user);\r\n        } else {\r\n          console.log('Identifiants incorrects');\r\n        }\r\n      });\r\n    } else {\r\n      console.log('Le formulaire de connexion est invalide');\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    this.userService.logout(); // Appel à la méthode de déconnexion\r\n    console.log('Utilisateur déconnecté');\r\n  }\r\n}\r\n","<h2>Connexion</h2>\r\n<form [formGroup]=\"loginForm\" (submit)=\"onSubmit($event)\">\r\n  <div>\r\n    <label for=\"userMail\">Email:</label>\r\n    <input type=\"email\" id=\"userMail\" formControlName=\"userMail\" />\r\n    <div *ngIf=\"loginForm.get('userMail')?.hasError('required')\">\r\n      <p>Email est requis.</p>\r\n    </div>\r\n    <div *ngIf=\"loginForm.get('userMail')?.hasError('userMail')\">\r\n      <p>Email invalide.</p>\r\n    </div>\r\n  </div>\r\n  <br />\r\n  <div>\r\n    <label for=\"password\">Mot de passe:</label>\r\n    <input type=\"password\" id=\"password\" formControlName=\"password\" />\r\n    <div *ngIf=\"loginForm.get('password')?.hasError('required')\">\r\n      <p>Mot de passe est requis.</p>\r\n    </div>\r\n  </div>\r\n  <br />\r\n  <button class=\"form-button\" type=\"submit\" [disabled]=\"loginForm.invalid\">\r\n    Connexion\r\n  </button>\r\n</form>\r\n\r\n<br />\r\n<a routerLink=\"/signup\">Nouveau membre? Vous inscrire!</a>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}