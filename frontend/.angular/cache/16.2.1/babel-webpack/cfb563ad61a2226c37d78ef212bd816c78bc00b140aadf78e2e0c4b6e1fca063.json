{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class UserService {\n  // Constructeur\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    // Déclaration de variable\n    this.isLoggedIn = false;\n    this.currentUser = null;\n    this.users = [];\n  }\n  // récupérer tous les utilisateurs\n  getUsers() {\n    return this.httpClient.get('http://localhost:8080/tinyslack/users');\n  }\n  // récupérer un utilisateur par son nom\n  getUserByName(userName) {\n    return this.httpClient.get('http://localhost:8080/tinyslack/users/' + userName);\n  }\n  // ajouter un nouvel utilisateur en BDD\n  addUser(user) {\n    return this.httpClient.post('http://localhost:8080/tinyslack/users', user);\n  }\n  // modifier un utilisateur existant en BDD\n  updateUser(userId, user) {\n    return this.httpClient.patch('http://localhost:8080/tinyslack/users/' + userN, user);\n  }\n  // supprimer un utilisateur existant en BDD\n  deleteUser(userName) {\n    return this.httpClient.delete('http://localhost:8080/tinyslack/users/' + userName);\n  }\n  // Authenfication (gère les affichages en fonction du statut)\n  login() {\n    this.isLoggedIn = true;\n  }\n  logout() {\n    this.isLoggedIn = false;\n  }\n  isLoggedInUser() {\n    return this.isLoggedIn;\n  }\n  // définir l'utilisateur actuel et connecté de la session\n  setCurrentUser(user) {\n    this.currentUser = user;\n  }\n  // récupérer l'utilisateur actuel et connecté de la session\n  getCurrentUser() {\n    return this.currentUser;\n  }\n  // pour charger les users bdd dans signup\n  loadUsers() {\n    this.httpClient.get('http://localhost:8080/tinyslack/users').subscribe(data => {\n      this.users = data;\n    });\n    console.log(this.users);\n  }\n  // permet de vérifier si l'user du signup utilise un nom/mail déjà utilisé en bdd\n  getUserByUserName(userName) {\n    return this.users.find(user => user.userName === userName);\n  }\n  getUserByUserEmail(email) {\n    return this.users.find(user => user.userMail === email);\n  }\n}\n_class = UserService;\n_class.ɵfac = function UserService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["UserService","constructor","httpClient","isLoggedIn","currentUser","users","getUsers","get","getUserByName","userName","addUser","user","post","updateUser","userId","patch","userN","deleteUser","delete","login","logout","isLoggedInUser","setCurrentUser","getCurrentUser","loadUsers","subscribe","data","console","log","getUserByUserName","find","getUserByUserEmail","email","userMail","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\ciyas\\Desktop\\formation_java\\ProjetJury\\Frontend\\src\\app\\Service\\user.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { User } from '../Model/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UserService {\r\n  // Déclaration de variable\r\n  private isLoggedIn: boolean = false;\r\n  private currentUser: User | null = null;\r\n  private users: User[] = [];\r\n\r\n  // Constructeur\r\n  constructor(private httpClient: HttpClient) {}\r\n\r\n  // récupérer tous les utilisateurs\r\n  getUsers(): Observable<User[]> {\r\n    return this.httpClient.get<User[]>('http://localhost:8080/tinyslack/users');\r\n  }\r\n\r\n  // récupérer un utilisateur par son nom\r\n  getUserByName(userName: string) {\r\n    return this.httpClient.get(\r\n      'http://localhost:8080/tinyslack/users/' + userName,\r\n    );\r\n  }\r\n\r\n  // ajouter un nouvel utilisateur en BDD\r\n  addUser(user: User): Observable<User> {\r\n    return this.httpClient.post<User>(\r\n      'http://localhost:8080/tinyslack/users',\r\n      user,\r\n    );\r\n  }\r\n\r\n  // modifier un utilisateur existant en BDD\r\n  updateUser(userId: string, user: User): Observable<User> {\r\n    return this.httpClient.patch<User>(\r\n      'http://localhost:8080/tinyslack/users/' + userN,\r\n      user,\r\n    );\r\n  }\r\n\r\n  // supprimer un utilisateur existant en BDD\r\n  deleteUser(userName: string | undefined): Observable<User> {\r\n    return this.httpClient.delete<User>(\r\n      'http://localhost:8080/tinyslack/users/' + userName,\r\n    );\r\n  }\r\n\r\n  // Authenfication (gère les affichages en fonction du statut)\r\n  login() {\r\n    this.isLoggedIn = true;\r\n  }\r\n\r\n  logout() {\r\n    this.isLoggedIn = false;\r\n  }\r\n\r\n  isLoggedInUser(): boolean {\r\n    return this.isLoggedIn;\r\n  }\r\n\r\n  // définir l'utilisateur actuel et connecté de la session\r\n  setCurrentUser(user: User | null) {\r\n    this.currentUser = user;\r\n  }\r\n\r\n  // récupérer l'utilisateur actuel et connecté de la session\r\n  getCurrentUser(): User | null {\r\n    return this.currentUser;\r\n  }\r\n\r\n  // pour charger les users bdd dans signup\r\n  loadUsers() {\r\n    this.httpClient\r\n      .get<User[]>('http://localhost:8080/tinyslack/users')\r\n      .subscribe((data) => {\r\n        this.users = data;\r\n      });\r\n    console.log(this.users);\r\n  }\r\n\r\n  // permet de vérifier si l'user du signup utilise un nom/mail déjà utilisé en bdd\r\n  getUserByUserName(userName: string): User | undefined {\r\n    return this.users.find((user) => user.userName === userName);\r\n  }\r\n\r\n  getUserByUserEmail(email: string): User | undefined {\r\n    return this.users.find((user) => user.userMail === email);\r\n  }\r\n}\r\n"],"mappings":";;;AAQA,OAAM,MAAOA,WAAW;EAMtB;EACAC,YAAoBC,UAAsB;IAAtB,KAAAA,UAAU,GAAVA,UAAU;IAN9B;IACQ,KAAAC,UAAU,GAAY,KAAK;IAC3B,KAAAC,WAAW,GAAgB,IAAI;IAC/B,KAAAC,KAAK,GAAW,EAAE;EAGmB;EAE7C;EACAC,QAAQA,CAAA;IACN,OAAO,IAAI,CAACJ,UAAU,CAACK,GAAG,CAAS,uCAAuC,CAAC;EAC7E;EAEA;EACAC,aAAaA,CAACC,QAAgB;IAC5B,OAAO,IAAI,CAACP,UAAU,CAACK,GAAG,CACxB,wCAAwC,GAAGE,QAAQ,CACpD;EACH;EAEA;EACAC,OAAOA,CAACC,IAAU;IAChB,OAAO,IAAI,CAACT,UAAU,CAACU,IAAI,CACzB,uCAAuC,EACvCD,IAAI,CACL;EACH;EAEA;EACAE,UAAUA,CAACC,MAAc,EAAEH,IAAU;IACnC,OAAO,IAAI,CAACT,UAAU,CAACa,KAAK,CAC1B,wCAAwC,GAAGC,KAAK,EAChDL,IAAI,CACL;EACH;EAEA;EACAM,UAAUA,CAACR,QAA4B;IACrC,OAAO,IAAI,CAACP,UAAU,CAACgB,MAAM,CAC3B,wCAAwC,GAAGT,QAAQ,CACpD;EACH;EAEA;EACAU,KAAKA,CAAA;IACH,IAAI,CAAChB,UAAU,GAAG,IAAI;EACxB;EAEAiB,MAAMA,CAAA;IACJ,IAAI,CAACjB,UAAU,GAAG,KAAK;EACzB;EAEAkB,cAAcA,CAAA;IACZ,OAAO,IAAI,CAAClB,UAAU;EACxB;EAEA;EACAmB,cAAcA,CAACX,IAAiB;IAC9B,IAAI,CAACP,WAAW,GAAGO,IAAI;EACzB;EAEA;EACAY,cAAcA,CAAA;IACZ,OAAO,IAAI,CAACnB,WAAW;EACzB;EAEA;EACAoB,SAASA,CAAA;IACP,IAAI,CAACtB,UAAU,CACZK,GAAG,CAAS,uCAAuC,CAAC,CACpDkB,SAAS,CAAEC,IAAI,IAAI;MAClB,IAAI,CAACrB,KAAK,GAAGqB,IAAI;IACnB,CAAC,CAAC;IACJC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACvB,KAAK,CAAC;EACzB;EAEA;EACAwB,iBAAiBA,CAACpB,QAAgB;IAChC,OAAO,IAAI,CAACJ,KAAK,CAACyB,IAAI,CAAEnB,IAAI,IAAKA,IAAI,CAACF,QAAQ,KAAKA,QAAQ,CAAC;EAC9D;EAEAsB,kBAAkBA,CAACC,KAAa;IAC9B,OAAO,IAAI,CAAC3B,KAAK,CAACyB,IAAI,CAAEnB,IAAI,IAAKA,IAAI,CAACsB,QAAQ,KAAKD,KAAK,CAAC;EAC3D;;SApFWhC,WAAW;;mBAAXA,MAAW,EAAAkC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;;SAAXrC,MAAW;EAAAsC,OAAA,EAAXtC,MAAW,CAAAuC,IAAA;EAAAC,UAAA,EAFV;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}